<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Control de Stock y Ventas</title>
  <style>
    body { font-family: Arial; margin: 20px; }
    input, button { margin: 5px; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
  </style>
</head>
<body>
  <h1>Control de Stock y Ventas - Productos Sublimables</h1>

  <h3>Agregar Producto</h3>
  <input type="text" id="nombre" placeholder="Nombre del producto">
  <input type="number" id="stock" placeholder="Stock">
  <input type="number" id="precio" placeholder="Precio">
  <button onclick="agregarProducto()">Agregar</button>

  <h3>Inventario</h3>
  <table id="tabla">
    <thead>
      <tr>
        <th>ID</th><th>Nombre</th><th>Stock</th><th>Precio</th><th>Vender</th>
      </tr>
    </thead>
    <tbody id="tablaBody"></tbody>
  </table>

  <script>
    let productos = [];
    let contador = 1;

    function agregarProducto() {
      const nombre = document.getElementById("nombre").value;
      const stock = parseInt(document.getElementById("stock").value);
      const precio = parseFloat(document.getElementById("precio").value);

      if (nombre && !isNaN(stock) && !isNaN(precio)) {
        productos.push({ id: contador++, nombre, stock, precio });
        actualizarTabla();
        limpiarCampos();
      } else {
        alert("Por favor, completa todos los campos correctamente.");
      }
    }

    function actualizarTabla() {
      const tabla = document.getElementById("tablaBody");
      tabla.innerHTML = "";
      productos.forEach(p => {
        tabla.innerHTML += `
          <tr>
            <td>${p.id}</td>
            <td>${p.nombre}</td>
            <td>${p.stock}</td>
            <td>$${p.precio.toFixed(2)}</td>
            <td>
              <button onclick="venderProducto(${p.id})">Vender</button>
            </td>
          </tr>`;
      });
    }

    function venderProducto(id) {
      const producto = productos.find(p => p.id === id);
      const cantidad = prompt(`¿Cuántas unidades de "${producto.nombre}" quieres vender?`);
      const cantidadNum = parseInt(cantidad);
      if (!isNaN(cantidadNum) && cantidadNum > 0) {
        if (producto.stock >= cantidadNum) {
          producto.stock -= cantidadNum;
          alert(`Venta registrada. Total: $${(cantidadNum * producto.precio).toFixed(2)}`);
          actualizarTabla();
        } else {
          alert("Stock insuficiente.");
        }
      } else {
        alert("Cantidad inválida.");
      }
    }

    function limpiarCampos() {
      document.getElementById("nombre").value = "";
      document.getElementById("stock").value = "";
      document.getElementById("precio").value = "";
    }
  </script>
</body>
</html>
